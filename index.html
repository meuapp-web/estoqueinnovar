<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Innovar | Estoque de Motos</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --verde:#1fa37a;
  --verde-escuro:#0f5f46;
  --cinza:#f2f2f2;
}

body{margin:0;font-family:Arial;background:var(--cinza)}

header{
  background:linear-gradient(135deg,var(--verde),var(--verde-escuro));
  padding:15px;
  text-align:center;
}
header img{height:45px}

.container{padding:15px;margin-bottom:90px}

.card{
  background:#fff;
  padding:15px;
  border-radius:12px;
  margin-bottom:15px;
}

input,select,button{
  width:100%;
  padding:10px;
  margin-top:8px;
  border-radius:6px;
  border:1px solid #ccc;
}

button{
  background:var(--verde);
  color:#fff;
  border:none;
  font-weight:bold;
}

.menu{
  position:fixed;
  bottom:0;
  width:100%;
  background:#fff;
  display:flex;
  gap:8px;
  padding:10px;
  border-top:2px solid var(--verde);
}

.hidden{display:none}

.item{
  display:flex;
  gap:10px;
}

.item img{
  width:100px;
  height:80px;
  object-fit:cover;
  border-radius:8px;
}

.status{
  padding:4px 8px;
  border-radius:5px;
  color:#fff;
  font-size:12px;
}

.Disponível{background:#2ecc71}
.Negociando{background:#f39c12}
.Reservada{background:#f1c40f;color:#000}
.Vendida{background:#e74c3c}

.lista-user{
  padding:8px;
  border-bottom:1px solid #ddd;
}
</style>
</head>

<body>

<header>
  <img src="logo.png">
</header>

<div class="container">

<!-- LOGIN -->
<div id="login" class="card">
  <input id="luser" placeholder="Login">
  <input id="lpass" type="password" placeholder="Senha">
  <button onclick="entrar()">Entrar</button>
</div>

<!-- GERENTE -->
<div id="gerente" class="hidden">

  <div class="card">
    <h3>Alterar login do gerente</h3>
    <input id="novoLogin" placeholder="Novo login">
    <input id="novaSenha" placeholder="Nova senha">
    <button onclick="alterarGerente()">Salvar</button>
  </div>

  <div class="card">
    <h3>Criar vendedor</h3>
    <input id="vNome" placeholder="Nome">
    <input id="vLogin" placeholder="Login">
    <input id="vSenha" placeholder="Senha">
    <button onclick="criarVendedor()">Criar</button>
  </div>

  <div class="card">
    <h3>Vendedores cadastrados</h3>
    <div id="listaVendedores"></div>
  </div>

  <div class="card">
    <h3>Cadastrar moto</h3>
    <input id="modelo" placeholder="Modelo">
    <input id="preco" placeholder="Preço">
    <input type="file" id="foto" accept="image/*">
    <button onclick="salvarMoto()">Salvar</button>
  </div>

</div>

<!-- ESTOQUE -->
<div id="estoque" class="hidden"></div>

</div>

<div class="menu hidden" id="menu">
  <button onclick="verEstoque()">Estoque</button>
  <button id="btnGerente" onclick="verGerente()">Gerente</button>
  <button onclick="sair()">Sair</button>
</div>

<script>
let usuarios = JSON.parse(localStorage.getItem("usuarios")) || [
  {id:1,nome:"Gerente",login:"gerente",senha:"1234",perfil:"gerente"}
];

let motos = JSON.parse(localStorage.getItem("motos")) || [];
let usuarioAtual = null;

function salvar(){
  localStorage.setItem("usuarios",JSON.stringify(usuarios));
  localStorage.setItem("motos",JSON.stringify(motos));
}

function entrar(){
  let u = usuarios.find(u=>u.login===luser.value && u.senha===lpass.value);
  if(!u){alert("Login inválido");return;}
  usuarioAtual=u;
  login.classList.add("hidden");
  menu.classList.remove("hidden");
  if(u.perfil!=="gerente") btnGerente.style.display="none";
  verEstoque();
}

function verGerente(){
  gerente.classList.remove("hidden");
  estoque.classList.add("hidden");
  listarVendedores();
}

function alterarGerente(){
  usuarioAtual.login=novoLogin.value||usuarioAtual.login;
  usuarioAtual.senha=novaSenha.value||usuarioAtual.senha;
  salvar();
  alert("Dados atualizados");
}

function criarVendedor(){
  usuarios.push({
    id:Date.now(),
    nome:vNome.value,
    login:vLogin.value,
    senha:vSenha.value,
    perfil:"vendedor"
  });
  salvar();
  listarVendedores();
}

function listarVendedores(){
  listaVendedores.innerHTML="";
  usuarios.filter(u=>u.perfil==="vendedor").forEach(v=>{
    listaVendedores.innerHTML+=`
      <div class="lista-user">
        <b>${v.nome}</b><br>
        <small>Login: ${v.login}</small>
      </div>`;
  });
}

function salvarMoto(){
  let r=new FileReader();
  r.onload=e=>{
    motos.push({
      id:Date.now(),
      modelo:modelo.value,
      preco:preco.value,
      foto:e.target.result,
      status:"Disponível",
      responsavel:"—"
    });
    salvar();
    alert("Moto cadastrada");
  };
  r.readAsDataURL(foto.files[0]);
}

function verEstoque(){
  gerente.classList.add("hidden");
  estoque.classList.remove("hidden");
  estoque.innerHTML="";
  motos.forEach(m=>{
    estoque.innerHTML+=`
    <div class="card item">
      <img src="${m.foto}">
      <div>
        <b>${m.modelo}</b><br>
        R$ ${m.preco}<br>
        <span class="status ${m.status}">${m.status}</span><br>
        <small>${m.responsavel}</small><br>
        <select onchange="mudarStatus(${m.id},this.value)">
          <option ${m.status=="Disponível"?"selected":""}>Disponível</option>
          <option ${m.status=="Negociando"?"selected":""}>Negociando</option>
          <option ${m.status=="Reservada"?"selected":""}>Reservada</option>
          <option ${m.status=="Vendida"?"selected":""}>Vendida</option>
        </select>
      </div>
    </div>`;
  });
}

function mudarStatus(id,s){
  let m=motos.find(m=>m.id===id);
  m.status=s;
  m.responsavel=usuarioAtual.nome;
  salvar();
}

function sair(){location.reload();}
</script>

</body>
</html>
